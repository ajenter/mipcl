<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MIPCL: MIPCL Primer</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="MIPCLlogo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MIPCL
   &#160;<span id="projectnumber">2.6</span>
   </div>
   <div id="projectbrief">Mixed Integer Programming Class Library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">MIPCL Primer </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><b>MIPCL</b> is a big library that comprises hundreds functions and its functionality depends on a great deal of parameters. Nevertheless, to get started working with <b>MIPCL</b>, we need to learn only a few its functions.</p>
<h1><a class="anchor" id="sec_primer"></a>
Primer</h1>
<p>Let us start with the next simple example: </p><p class="formulaDsp">
<img class="formulaDsp" alt="\begin{align*} 100 x_0 + 64 x_1 &amp;\to \max,\\ 50 x_0 + 31 x_1 &amp;\le 250,\\ -3 x_0 + 2 x_1 &amp;\le 4,\\ x_0,\:x_1 &amp;\in \mathbb{Z}_+. \end{align*}" src="form_0.png"/>
</p>
<p>A program that solves this test MIP example is presented in the following listing.</p>
<p></p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="except_8h.html">except.h</a>&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div><div class="line"></div><div class="line"><span class="keywordtype">int</span> variant1()</div><div class="line">{</div><div class="line">        <span class="keywordflow">try</span> {</div><div class="line">                <a class="code" href="classCMIP.html">CMIP</a> prob(<span class="stringliteral">&quot;MIPCLtest&quot;</span>); <span class="comment">// 1</span></div><div class="line">                prob.openMatrix(2,2,4); <span class="comment">// 2</span></div><div class="line">                prob.addVar(0,<a class="code" href="classCLP.html#a89292c62c83b834a8b451bde23c67627a2f778e20d4c99ef9739681b2bc811b0d">CMIP::VAR_INT</a>, 100.0,0.0, <a class="code" href="classCLP.html#a921256fa400b2cdb6c5008bf189aa7a8">CLP::VAR_INF</a>); <span class="comment">// 3</span></div><div class="line">                prob.addVar(1,<a class="code" href="classCLP.html#a89292c62c83b834a8b451bde23c67627a2f778e20d4c99ef9739681b2bc811b0d">CMIP::VAR_INT</a>,  64.0,0.0, <a class="code" href="classCLP.html#a921256fa400b2cdb6c5008bf189aa7a8">CLP::VAR_INF</a>); <span class="comment">// 4</span></div><div class="line">                prob.addCtr(0,0,-<a class="code" href="classCLP.html#acbcd9ecf00ad8658d570dd803b0aabe3">CLP::INF</a>,250); <span class="comment">// 5</span></div><div class="line">                prob.addCtr(1,0,-<a class="code" href="classCLP.html#acbcd9ecf00ad8658d570dd803b0aabe3">CLP::INF</a>,4); <span class="comment">// 6</span></div><div class="line">                prob.addEntry(50.0,0,0); <span class="comment">// 7.1</span></div><div class="line">                prob.addEntry(31.0,0,1); <span class="comment">// 7.2</span></div><div class="line">                prob.addEntry(-3.0,1,0); <span class="comment">// 7.3</span></div><div class="line">                prob.addEntry( 2.0,1,1); <span class="comment">// 7.4</span></div><div class="line">                prob.closeMatrix(); <span class="comment">// (8)</span></div><div class="line">                prob.optimize(); <span class="comment">// (9)</span></div><div class="line">                prob.printSolution(<span class="stringliteral">&quot;primer.sol&quot;</span>); <span class="comment">// (10)</span></div><div class="line">        }</div><div class="line">        <span class="keywordflow">catch</span>(<a class="code" href="classCException.html">CException</a>* pe) {</div><div class="line">                std::cerr &lt;&lt; pe-&gt;<a class="code" href="classCException.html#af66e5406dda297fa8b253e89b6e00973">what</a>() &lt;&lt; std::endl;</div><div class="line">                <span class="keyword">delete</span> pe;</div><div class="line">                <span class="keywordflow">return</span> 1;</div><div class="line">        }</div><div class="line">        <span class="keywordflow">return</span> 0;</div><div class="line">} <span class="comment">// end of variant1</span></div></div><!-- fragment --> <dl class="section see"><dt>See also</dt><dd><a class="el" href="classCMIP.html#a0565b27e1966ceb19380a4d3d7bcec5a">CMIP::CMIP(const char*)</a>, <a class="el" href="classCMIP.html#a93d43af3654fd597ed45fbebd6ddf6d8">CMIP::openMatrix()</a>, <a class="el" href="classCLP.html#a41e6abd8eca3cbf22a958dbddbfe9069">CLP::addVar()</a>, <a class="el" href="classCLP.html#a0d5b435146fc416d5bc296f0acbbf029">CLP::addCtr()</a>, <a class="el" href="classCLP.html#a574534be9bfcd5d37b8cd209cf2e2535">CLP::addEntry()</a>, <a class="el" href="classCMIP.html#ac5a190e3a9fea5b1ee960edf73d9fa66">CMIP::closeMatrix()</a>, <a class="el" href="classCMIP.html#af68f591f9fb72ea0dfe2e7964c8265da">CMIP::optimize()</a>, <a class="el" href="classCMIP.html#a91249febf036dd979f7584bc0962137a">CMIP::printSolution()</a>.</dd></dl>
<p>Next we explain each line of this program (lines are numbered in the comments).</p><ol type="1">
<li>Creates a new <b>MIPCL</b>-problem named "MIPCLtest".</li>
<li>Opens 2x2-matrix with <code>4</code> nonzero entries.</li>
<li>Adds variable <img class="formulaInl" alt="$x_0$" src="form_1.png"/><ul>
<li>with handle <code>0</code> and of type <code><a class="el" href="classCLP.html#a89292c62c83b834a8b451bde23c67627a2f778e20d4c99ef9739681b2bc811b0d" title="integral variable, meaningless in CLP.">CMIP::VAR_INT</a></code> (integer variable),</li>
<li>objective coefficient equal to <code>100</code>,</li>
<li>lower bound <code>0</code>, upper bound <code><a class="el" href="classCLP.html#a921256fa400b2cdb6c5008bf189aa7a8" title="default value of infinity for variables.">CLP::VAR_INF</a></code> (infinity).</li>
</ul>
</li>
<li>Adds variable <img class="formulaInl" alt="$x_1$" src="form_2.png"/><ul>
<li>with handle <code>1</code> and of type <code><a class="el" href="classCLP.html#a89292c62c83b834a8b451bde23c67627a2f778e20d4c99ef9739681b2bc811b0d" title="integral variable, meaningless in CLP.">CMIP::VAR_INT</a></code> (integer variable),</li>
<li>objective coefficient equal to <code>64</code>,</li>
<li>lower bound <code>0</code>, upper bound <code><a class="el" href="classCLP.html#a921256fa400b2cdb6c5008bf189aa7a8" title="default value of infinity for variables.">CLP::VAR_INF</a></code> (infinity).</li>
</ul>
</li>
<li>Adds constraint<ul>
<li>with handle <code>0</code> and of type <code>0</code>,</li>
<li>left hand side (lhs) equal to <img class="formulaInl" alt="$-\infty$" src="form_3.png"/>, and right hand side (rhs) equal to <code>250</code>.</li>
</ul>
</li>
<li>Adds constraint<ul>
<li>with handle <code>1</code> and of type <code>0</code>,</li>
<li>lhs equal to <img class="formulaInl" alt="$-\infty$" src="form_3.png"/>, and rhs equal to <code>4</code>.</li>
</ul>
</li>
<li>Adds to the matrix four coefficients (entries) with the following values:<ul>
<li>1) <code>50</code> in row <code>0</code> and column <code>0</code>,</li>
<li>2) <code>31</code> in row <code>0</code> and column <code>1</code>,</li>
<li>3) <code>-3</code> in row <code>1</code> and column <code>0</code>,</li>
<li>4) <code>2</code> in row <code>1</code> and column <code>1</code>.</li>
</ul>
</li>
<li>Closes the matrix.</li>
<li>Solves the problem.</li>
<li>Writes the best solution found by the solver to the file named "primer.txt".</li>
</ol>
<dl class="section remark"><dt>Remarks</dt><dd>With a few exceptions, the user do not need to point out constraint types since the solver is able to classify constrains by itself.</dd></dl>
<p>The procedure in the following listing solves our test example as well. </p><div class="fragment"><div class="line"></div><div class="line"><span class="comment">// Constants that represent our test IP.</span></div><div class="line"><span class="keyword">const</span> <span class="keywordtype">int</span> n=2, m=2, nz=4;</div><div class="line"><span class="keywordtype">double</span> c[] = {100,64}; <span class="comment">// cost vector</span></div><div class="line"></div><div class="line"><span class="keywordtype">double</span> A[][n] = { <span class="comment">// matrix</span></div><div class="line">                {50,31},</div><div class="line">                {-3,2}</div><div class="line">};</div><div class="line"><span class="keywordtype">double</span> b[] = {250,4}; <span class="comment">// right-hand side vector</span></div><div class="line"></div><div class="line"><span class="keywordtype">int</span> ind[] = {0,1}; <span class="comment">// array of indices</span></div><div class="line"></div><div class="line"><span class="keywordtype">int</span> variant2()</div><div class="line">{</div><div class="line">        <span class="keywordflow">try</span> {</div><div class="line">                <a class="code" href="classCMIP.html">CMIP</a> prob(<span class="stringliteral">&quot;MIPCLtest&quot;</span>); <span class="comment">// create new MIP problem</span></div><div class="line">                prob.openMatrix(n,m,nz); <span class="comment">// open matrix</span></div><div class="line"></div><div class="line">                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j=0; j &lt; n; ++j) <span class="comment">// adds n variables:</span></div><div class="line">                        prob.addVar(j,<a class="code" href="classCLP.html#a89292c62c83b834a8b451bde23c67627a2f778e20d4c99ef9739681b2bc811b0d">CMIP::VAR_INT</a>, c[j],0.0, <a class="code" href="classCLP.html#a921256fa400b2cdb6c5008bf189aa7a8">CLP::VAR_INF</a>);</div><div class="line"></div><div class="line">                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i &lt; m; ++i) <span class="comment">// add m rows (constraints):</span></div><div class="line">                        prob.addRow(i,0,-<a class="code" href="classCLP.html#acbcd9ecf00ad8658d570dd803b0aabe3">CLP::INF</a>,b[i],n,A[i],ind);</div><div class="line"></div><div class="line">                prob.closeMatrix(); <span class="comment">// close matrix</span></div><div class="line">                prob.optimize(); <span class="comment">// solve problem</span></div><div class="line"></div><div class="line">                prob.printSolution(<span class="stringliteral">&quot;primer.sol&quot;</span>); <span class="comment">// print solution</span></div><div class="line">        }</div><div class="line">        <span class="keywordflow">catch</span>(<a class="code" href="classCException.html">CException</a>* pe) {</div><div class="line">                std::cerr &lt;&lt; pe-&gt;<a class="code" href="classCException.html#af66e5406dda297fa8b253e89b6e00973">what</a>() &lt;&lt; std::endl;</div><div class="line">                <span class="keyword">delete</span> pe;</div><div class="line">                <span class="keywordflow">return</span> 1;</div><div class="line">        }</div><div class="line">        <span class="keywordflow">return</span> 0;</div><div class="line">}  <span class="comment">// end of variant2</span></div></div><!-- fragment --><p>The procedure <code>variant2()</code> is a minor modification of the procedure <code>variant1()</code>. Now we add each row <code>i</code> and its nonzero entries in one call to the function <code><a class="el" href="classCLP.html#aee7861b5b2e692f6043dfe1d7bd77e21">CLP::addRow()</a></code> that adds a constraint</p><ul>
<li>with handle <code>i</code> and of type <code>0</code>,</li>
<li>lhs equal to <img class="formulaInl" alt="$-\infty$" src="form_3.png"/>, and rhs equal to <code>b[i]</code>,</li>
<li>and the coefficients: <code>A[j]</code> in row <code>i</code> and column <code>ind[j]</code>, <code>j=0,...,n-1</code>.</li>
</ul>
<p>We left it to the user to write one more version of the procedure that solves our test MIP instance. This time the matrix should be build by adding columns to it.</p>
<p>Now it is only left to call one of the above procedures, <code>variant1()</code> or <code>variant2()</code>. </p><div class="fragment"><div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv[])</div><div class="line">{</div><div class="line">        <span class="keywordtype">int</span> v=1;</div><div class="line">        <span class="keywordflow">if</span> (argc &gt; 1)</div><div class="line">                <span class="keywordflow">if</span> (argv[1][0] == <span class="charliteral">&#39;2&#39;</span>)</div><div class="line">                        v=2;</div><div class="line">        <span class="keywordflow">return</span> (v == 1)? variant1(): variant2();</div><div class="line">}</div></div><!-- fragment --><h2><a class="anchor" id="sec_primerCompile"></a>
Primer: compilation and linking</h2>
<p>Assuming that all the above procedures are written in one file <code>primer.cpp</code> situated in the working directory, we can compile and then link the resulting objective file with the single-threading static <b>MIPCL</b> library as follows.</p>
<p>In UNIX/LINUX systems, we enter the following commands: </p><pre class="fragment">$ g++ -c -I$(MIPCLDIR)/mipcl/headers -m64 -DMIP_API= primer.cpp
$ g++ primer.o  -L$(MIPCLDIR)/lib64 -lmipcl -o primer
</pre><p>In WINDOWS you need to execute similar instructions: </p><pre class="fragment">g++ -I\$(MIPDIR)/mipcl/headers testMIP.cpp\\
g++ -shared-libgcc testMIP.o \$(MIPDIR)/bin/mipcl.dll -o testMIP.exe
</pre><p>As the result, we get the program <code>primer</code> (in Windows <code>primer.exe</code>) that solve our test instance.</p>
<p>If we run this program by entering the command "./primer" (<code>primer.exe</code> in Windows), we get the solution of our test instance written to the file "primer.sol": </p><pre class="fragment"> Objective Value: 500
 Variables/Columns:
   Name                  Value
   x(0)               5.000000
   x(1)               0.000000
</pre> </div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Nov 28 2019 21:54:31 for MIPCL by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.15
</small></address>
</body>
</html>
