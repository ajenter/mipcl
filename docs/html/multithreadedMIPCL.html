<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MIPCL: Multithreading</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="MIPCLlogo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MIPCL
   &#160;<span id="projectnumber">2.6</span>
   </div>
   <div id="projectbrief">Mixed Integer Programming Class Library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Multithreading </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Developing and debugging complex multithreaded applications is far from being a trivial task. Designing <b>MIPCL</b>, I tried not to add further difficulties. If you do not overload any <b>MICL</b>-function in your application, then there is nothing to be bothered about: your application will run equally well both with singlethreaded and multithreaded libraries. But if in your application you generate cuts or columns, implement your own branching strategy. or simply overload any virtual function of the base class <code><a class="el" href="classCMIP.html" title="Class CMIP has been designed for solving Mixed Integer Programs (MIPs)">CMIP</a></code>, in a derived subclass, say <code>CMyMIP</code>, of <code><a class="el" href="classCMIP.html" title="Class CMIP has been designed for solving Mixed Integer Programs (MIPs)">CMIP</a></code>, you have to implement a clone constructor and overload the function <code>clone()</code> that, getting a reference to an instance of <code>CMyMIP</code>, uses the clone constructor to create a new instance of class <code>CMyMIP</code>. This function returns a pointer of type <code><a class="el" href="classCMIP.html" title="Class CMIP has been designed for solving Mixed Integer Programs (MIPs)">CMIP</a></code>* to the newly created instance. All said above is demonstrated in the listing below.</p>
<p><em>Template of multithreaded class</em> <code>CMyMIP</code>: </p><div class="fragment"><div class="line"><span class="preprocessor">#include &quot;CMIP.h&quot;</span></div><div class="line"></div><div class="line"><span class="keyword">class </span>CMyMip: <span class="keyword">public</span> <a class="code" href="classCMIP.html">CMIP</a></div><div class="line">{</div><div class="line">     <span class="keywordtype">int</span> *var1; <span class="comment">// shared memory</span></div><div class="line">     <span class="keywordtype">int</span> var2Size; <span class="comment">// size of var2</span></div><div class="line">     <span class="keywordtype">double</span> *var2; <span class="comment">// not shared memory</span></div><div class="line">     ............. <span class="comment">// other definitions</span></div><div class="line"><span class="preprocessor">     #ifdef __THREADS_</span></div><div class="line">     CMyMIP(CMyMip &amp;other, <span class="keywordtype">int</span> thread);</div><div class="line">     <a class="code" href="classCMIP.html">CMIP</a>* <a class="code" href="classCMIP.html#a33363f035bbd0ac5746cc4753886b013">clone</a>(<span class="keyword">const</span> <a class="code" href="classCMIP.html">CMIP</a> *pMip, <span class="keywordtype">int</span> thread);</div><div class="line"><span class="preprocessor">     #endif</span></div><div class="line">     ~CMyMIP();</div><div class="line">     <span class="comment">// other functions</span></div><div class="line">};</div><div class="line"></div><div class="line"><span class="comment">// Implementation</span></div><div class="line"></div><div class="line"><span class="preprocessor">#ifdef __THREADS_</span></div><div class="line">CMyMip::CMyMIP(CMyMip &amp;other, <span class="keywordtype">int</span> thread): <a class="code" href="classCMIP.html">CMIP</a>(other,thread)</div><div class="line">{</div><div class="line">     var1=other.var1;</div><div class="line">     var2=<span class="keyword">new</span> <span class="keywordtype">double</span>[var2Size=other.var2Size];</div><div class="line">     memcpy(var2,other.var2,var2Size*<span class="keyword">sizeof</span>(<span class="keywordtype">double</span>));</div><div class="line">}</div><div class="line"></div><div class="line"><a class="code" href="classCMIP.html">CMIP</a>* CMyMIP::clone(<span class="keyword">const</span> <a class="code" href="classCMIP.html">CMIP</a> *pMip, <span class="keywordtype">int</span> thread)</div><div class="line">{</div><div class="line">     <span class="keywordflow">return</span> static_cast&lt;CMIP*&gt;(<span class="keyword">new</span> CMyMIP(static_cast&lt;CMyMIP*&gt;(const_cast&lt;CMIP*&gt;(pMip)),thread));</div><div class="line">}</div><div class="line"><span class="preprocessor">#endif</span></div><div class="line"></div><div class="line">CMIP::~CMyMIP()</div><div class="line">{</div><div class="line"><span class="preprocessor">     #ifdef __THREADS_</span></div><div class="line">     <span class="keywordflow">if</span> (!<a class="code" href="classCLP.html#a8b5f7c2e56e6ff229d6768c960107792">m_iThread</a>) {</div><div class="line">          <span class="keyword">delete</span> var1;</div><div class="line">     }</div><div class="line"><span class="preprocessor">     #endif</span></div><div class="line">     <span class="keyword">delete</span> var2;</div><div class="line">}</div></div><!-- fragment --><p>Two arrays are declared in this abstract class: an array of integers, <code>var1</code>, which is shared by all threads, and an array of doubles, <code>var2</code>, which is unique for each thread. When creating a new instance of <code>CMyMip</code>, the clone constructor stores in <code>var1</code> the pointer, <code>other.var1</code>, to the shared array; while for the unshared array <code>var2</code>, the clone constructor allocates memory of needed size <code>var2Size</code>, and then copies into this memory the array <code>other.var2</code> of the cloned class.</p>
<p>In fact, <code>clone()</code> only calls the clone constructor and appropriately adjusts parameter types.</p>
<p>Initially, multithreading in <b>MIPCL</b> was implemented using <code>pthread</code>, the <b>POSIX</b> thread library. To easy possible future adaptation of <b>MIPCL</b> for working with native thread libraries for different platforms, all calls of <code>pthread</code> functions were replaced with calls to macros that are of the same names (but written in capital letters) as corresponding functions from <code>pthread</code>. All these macros are defined in the file <code>threads.h</code>. You can use these macros in your <b>MIPCL</b> applications unless you are implementing a complicated model for parallel computations.</p>
<p>Currently, <code><a class="el" href="thread_8h.html">thread.h</a></code> implements the above mentioned macros also for the native <b>WINDOWS</b>. In fact, <code><a class="el" href="thread_8h.html">thread.h</a></code> is the only platform dependent (non-portable) part of <b>MIPCL</b>. </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Nov 28 2019 21:54:31 for MIPCL by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.15
</small></address>
</body>
</html>
